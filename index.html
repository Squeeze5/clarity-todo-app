<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clarity Todo App</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="lib/instantdb.js"></script>
    <!-- EmailJS SDK for sending emails without backend -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <div class="header-top">
                <h1><i class="fas fa-check-circle"></i> Clarity Todo</h1>
                <div class="header-actions">
                    <div class="search-container">
                        <i class="fas fa-search"></i>
                        <input type="text" id="global-search-input" placeholder="Search tasks..." maxlength="100">
                        <button class="btn btn-secondary btn-sm" id="global-clear-search-btn" style="display: none;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <button class="btn btn-primary" id="add-folder-btn">
                        <i class="fas fa-folder-plus"></i> New Folder
                    </button>
                    <button class="theme-toggle" id="theme-toggle-btn" title="Toggle Dark Mode">
                        <i class="fas fa-moon" id="theme-icon"></i>
                    </button>
                </div>
            </div>
        </header>

        <div class="main-content">
            <aside class="sidebar">
                <!-- User Profile Section -->
                <div class="sidebar-user-section" id="sidebar-user-section">
                    <!-- Profile menu will be inserted here by JavaScript -->
                </div>

                <div class="folder-section">
                    <h3>Folders</h3>
                    <div class="folder-list" id="folder-list">
                        <div class="folder-item active" data-folder-id="default">
                            <i class="fas fa-inbox"></i>
                            <span>Inbox</span>
                            <span class="task-count">0</span>
                        </div>
                    </div>
                </div>
            </aside>

            <main class="task-area">
                <div class="breadcrumb" id="breadcrumb-nav" style="display: none;">
                    <!-- Breadcrumb navigation will be inserted here -->
                </div>
                <div class="task-header">
                    <h2 id="current-folder-title">Inbox</h2>
                    <div class="task-header-actions">
                        <button class="btn btn-secondary btn-sm" id="add-section-btn">
                            <i class="fas fa-layer-group"></i> Add Section
                        </button>
                        <button class="btn btn-secondary" id="add-subfolder-btn" style="display: none;">
                            <i class="fas fa-folder-plus"></i> Create Subfolder
                        </button>
                        <button class="btn btn-primary" id="add-task-btn">
                            <i class="fas fa-plus"></i> Add Task
                        </button>
                    </div>
                </div>

                <!-- Sections will be rendered here -->
                <div id="sections-container"></div>

                <div class="task-input-container" id="task-input-container" style="display: none;">
                    <input type="text" id="task-input" placeholder="Task name" maxlength="200">

                    <div class="description-section">
                        <label for="task-description"><i class="fas fa-align-left"></i> Description</label>
                        <textarea id="task-description" placeholder="Add details about this task..." rows="4" maxlength="1000"></textarea>
                    </div>

                    <div class="task-meta-row">
                        <div class="quick-date-buttons">
                            <button class="btn btn-sm btn-quick-date" id="quick-date-today" type="button">
                                <i class="far fa-calendar"></i> Today
                            </button>
                            <button class="btn btn-sm btn-quick-date" id="quick-date-tomorrow" type="button">
                                <i class="far fa-calendar"></i> Tomorrow
                            </button>
                            <button class="btn btn-sm btn-quick-date" id="quick-date-next-week" type="button">
                                <i class="far fa-calendar"></i> Next Week
                            </button>
                        </div>

                        <div class="priority-selector">
                            <label><i class="fas fa-flag"></i> Priority:</label>
                            <select id="task-priority">
                                <option value="4">P4</option>
                                <option value="3">P3</option>
                                <option value="2">P2</option>
                                <option value="1">P1</option>
                            </select>
                        </div>
                    </div>

                    <button class="btn btn-specify" id="specify-task-btn" type="button">
                        <i class="fas fa-list"></i> Sub-tasks
                    </button>
                    <div class="subtasks-container" id="subtasks-container" style="display: none;">
                        <div class="subtasks-list" id="subtasks-list"></div>
                        <div class="subtask-input-row">
                            <input type="text" id="subtask-input" placeholder="Add a bullet point..." maxlength="200">
                            <button class="btn btn-sm btn-success" id="add-subtask-btn">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>

                    <div class="task-datetime-container">
                        <div class="datetime-row">
                            <div class="date-field">
                                <label for="task-due-date"><i class="far fa-calendar"></i> Due Date:</label>
                                <input type="date" id="task-due-date">
                            </div>
                            <div class="time-field">
                                <label for="task-due-time"><i class="far fa-clock"></i> Time:</label>
                                <input type="time" id="task-due-time">
                            </div>
                        </div>
                        <div class="reminder-settings" id="reminder-settings" style="display: none;">
                            <div class="reminder-row">
                                <div class="reminder-type-field">
                                    <label>Remind me via:</label>
                                    <select id="task-reminder-type">
                                        <option value="none">No reminder</option>
                                        <option value="notification">Browser notification</option>
                                        <option value="email">Email</option>
                                    </select>
                                </div>
                                <div class="reminder-timing-field" id="reminder-timing-field" style="display: none;">
                                    <label>When:</label>
                                    <select id="task-reminder-timing">
                                        <option value="10min">10 minutes before</option>
                                        <option value="30min">30 minutes before</option>
                                        <option value="1hour" selected>1 hour before</option>
                                        <option value="2hours">2 hours before</option>
                                        <option value="1day">1 day before</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="task-input-actions">
                        <button class="btn btn-success" id="save-task-btn">
                            <i class="fas fa-check"></i> Save
                        </button>
                        <button class="btn btn-secondary" id="cancel-task-btn">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </div>

                <div class="task-list" id="task-list">
                    <div class="empty-state">
                        <i class="fas fa-clipboard-list"></i>
                        <h3>No tasks yet</h3>
                        <p>Click "Add Task" to create your first task</p>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Folder Modal -->
    <div class="modal" id="folder-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="folder-modal-title">New Folder</h3>
                <button class="modal-close" id="folder-modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <input type="text" id="folder-name-input" placeholder="Folder name..." maxlength="50">
                <div class="color-picker">
                    <label>Choose color:</label>
                    <div class="color-options">
                        <div class="color-option" data-color="#3b82f6" style="background-color: #3b82f6;"></div>
                        <div class="color-option" data-color="#10b981" style="background-color: #10b981;"></div>
                        <div class="color-option" data-color="#f59e0b" style="background-color: #f59e0b;"></div>
                        <div class="color-option" data-color="#ef4444" style="background-color: #ef4444;"></div>
                        <div class="color-option" data-color="#8b5cf6" style="background-color: #8b5cf6;"></div>
                        <div class="color-option" data-color="#06b6d4" style="background-color: #06b6d4;"></div>
                        <div class="color-option" data-color="#ec4899" style="background-color: #ec4899;"></div>
                        <div class="color-option" data-color="#14b8a6" style="background-color: #14b8a6;"></div>
                        <div class="color-option" data-color="#f97316" style="background-color: #f97316;"></div>
                        <div class="color-option" data-color="#6366f1" style="background-color: #6366f1;"></div>
                        <div class="color-option" data-color="#84cc16" style="background-color: #84cc16;"></div>
                        <div class="color-option" data-color="#eab308" style="background-color: #eab308;"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="save-folder-btn">Save</button>
                <button class="btn btn-secondary" id="cancel-folder-btn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Task Edit Modal -->
    <div class="modal" id="task-modal">
        <div class="modal-content modal-content-large">
            <div class="modal-header">
                <h3>Edit Task</h3>
                <button class="modal-close" id="task-modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <input type="text" id="edit-task-input" placeholder="Task name" maxlength="200">

                <div class="description-section">
                    <label for="edit-task-description"><i class="fas fa-align-left"></i> Description</label>
                    <textarea id="edit-task-description" placeholder="Add details about this task..." rows="6" maxlength="1000"></textarea>
                </div>

                <div class="task-meta-row">
                    <div class="quick-date-buttons">
                        <button class="btn btn-sm btn-quick-date" id="edit-quick-date-today" type="button">
                            <i class="far fa-calendar"></i> Today
                        </button>
                        <button class="btn btn-sm btn-quick-date" id="edit-quick-date-tomorrow" type="button">
                            <i class="far fa-calendar"></i> Tomorrow
                        </button>
                        <button class="btn btn-sm btn-quick-date" id="edit-quick-date-next-week" type="button">
                            <i class="far fa-calendar"></i> Next Week
                        </button>
                    </div>

                    <div class="priority-selector">
                        <label><i class="fas fa-flag"></i> Priority:</label>
                        <select id="edit-task-priority">
                            <option value="4">P4</option>
                            <option value="3">P3</option>
                            <option value="2">P2</option>
                            <option value="1">P1</option>
                        </select>
                    </div>
                </div>

                <button class="btn btn-specify" id="edit-specify-task-btn" type="button">
                    <i class="fas fa-list"></i> Sub-tasks
                </button>
                <div class="subtasks-container" id="edit-subtasks-container" style="display: none;">
                    <div class="subtasks-list" id="edit-subtasks-list"></div>
                    <div class="subtask-input-row">
                        <input type="text" id="edit-subtask-input" placeholder="Add a bullet point..." maxlength="200">
                        <button class="btn btn-sm btn-success" id="edit-add-subtask-btn">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                </div>

                <div class="task-datetime-container">
                    <div class="datetime-row">
                        <div class="date-field">
                            <label for="edit-task-due-date"><i class="far fa-calendar"></i> Due Date:</label>
                            <input type="date" id="edit-task-due-date">
                        </div>
                        <div class="time-field">
                            <label for="edit-task-due-time"><i class="far fa-clock"></i> Time:</label>
                            <input type="time" id="edit-task-due-time">
                        </div>
                    </div>
                    <div class="reminder-settings" id="edit-reminder-settings" style="display: none;">
                        <div class="reminder-row">
                            <div class="reminder-type-field">
                                <label>Remind me via:</label>
                                <select id="edit-task-reminder-type">
                                    <option value="none">No reminder</option>
                                    <option value="notification">Browser notification</option>
                                    <option value="email">Email</option>
                                </select>
                            </div>
                            <div class="reminder-timing-field" id="edit-reminder-timing-field" style="display: none;">
                                <label>When:</label>
                                <select id="edit-task-reminder-timing">
                                    <option value="10min">10 minutes before</option>
                                    <option value="30min">30 minutes before</option>
                                    <option value="1hour">1 hour before</option>
                                    <option value="2hours">2 hours before</option>
                                    <option value="1day">1 day before</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="save-edit-task-btn">Save</button>
                <button class="btn btn-secondary" id="cancel-edit-task-btn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Authentication Modal -->
    <div class="modal active" id="auth-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="auth-modal-title">Sign In to Clarity Todo</h3>
            </div>
            <div class="modal-body">
                <div id="auth-form">
                    <input type="email" id="auth-email" placeholder="Email address..." autocomplete="email">
                    <input type="password" id="auth-password" placeholder="Password..." autocomplete="current-password">
                    <div id="auth-confirm-password-container" style="display: none;">
                        <input type="password" id="auth-confirm-password" placeholder="Confirm password..." autocomplete="new-password">
                    </div>
                    <div id="auth-error" class="auth-error" style="display: none;"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="auth-submit-btn">Sign In</button>
                <button class="btn btn-secondary" id="auth-toggle-btn">Don't have an account? Sign Up</button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div class="modal" id="confirmation-modal">
        <div class="modal-content confirmation-modal-content">
            <div class="modal-header">
                <h3 id="confirmation-title">Confirm Action</h3>
            </div>
            <div class="modal-body">
                <p id="confirmation-message">Are you sure you want to perform this action?</p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="confirm-yes-btn">Yes</button>
                <button class="btn btn-secondary" id="confirm-no-btn">No</button>
            </div>
        </div>
    </div>

    <!-- Section Modal -->
    <div class="modal" id="section-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="section-modal-title">New Section</h3>
                <button class="modal-close" id="section-modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <input type="text" id="section-name-input" placeholder="Section name..." maxlength="100">
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="save-section-btn">Save</button>
                <button class="btn btn-secondary" id="cancel-section-btn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settings-modal">
        <div class="modal-content modal-content-large settings-modal-content">
            <div class="modal-header">
                <h3>Settings</h3>
                <button class="modal-close" id="settings-modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="settings-container">
                <div class="settings-sidebar">
                    <button class="settings-tab-btn active" data-tab="account">
                        <i class="fas fa-user"></i>
                        <span>Account</span>
                    </button>
                    <button class="settings-tab-btn" data-tab="general">
                        <i class="fas fa-sliders-h"></i>
                        <span>General</span>
                    </button>
                    <button class="settings-tab-btn" data-tab="reminders">
                        <i class="fas fa-bell"></i>
                        <span>Reminders</span>
                    </button>
                    <button class="settings-tab-btn" data-tab="appearance">
                        <i class="fas fa-palette"></i>
                        <span>Appearance</span>
                    </button>
                </div>
                <div class="settings-content">
                    <!-- Account Tab -->
                    <div class="settings-tab active" id="settings-tab-account">
                        <h4 class="settings-section-title">Account Information</h4>

                        <div class="settings-group">
                            <label class="settings-label">Email Address</label>
                            <input type="email" id="settings-email" class="settings-input" readonly>
                            <p class="settings-help">Your email address is used for authentication and email reminders</p>
                        </div>

                        <div class="settings-group">
                            <label class="settings-label">Nickname</label>
                            <div style="display: flex; gap: 8px; align-items: flex-start;">
                                <input type="text" id="settings-nickname" class="settings-input" placeholder="Enter your nickname" maxlength="50">
                                <button class="btn btn-secondary" id="change-nickname-btn">
                                    <i class="fas fa-edit"></i> Change
                                </button>
                            </div>
                            <p class="settings-help">Your display name shown in the sidebar</p>
                        </div>

                        <div class="settings-group">
                            <label class="settings-label">User ID</label>
                            <input type="text" id="settings-user-id" class="settings-input" readonly>
                            <p class="settings-help">Your unique user identifier</p>
                        </div>

                        <div class="settings-divider"></div>

                        <h4 class="settings-section-title">Security</h4>

                        <div class="settings-group">
                            <button class="btn btn-secondary" id="reset-password-btn">
                                <i class="fas fa-key"></i> Reset Password
                            </button>
                            <p class="settings-help">Change your account password</p>
                        </div>

                        <div class="settings-divider"></div>

                        <h4 class="settings-section-title">Data Management</h4>

                        <div class="settings-group">
                            <button class="btn btn-secondary" id="export-data-btn">
                                <i class="fas fa-download"></i> Export All Data
                            </button>
                            <p class="settings-help">Download all your tasks, folders, and sections as JSON</p>
                        </div>
                    </div>

                    <!-- General Tab -->
                    <div class="settings-tab" id="settings-tab-general">
                        <h4 class="settings-section-title">Task Defaults</h4>

                        <div class="settings-group">
                            <label class="settings-label">Default Priority</label>
                            <select id="settings-default-priority" class="settings-select">
                                <option value="4">P4 (Lowest)</option>
                                <option value="3">P3</option>
                                <option value="2">P2</option>
                                <option value="1">P1 (Highest)</option>
                            </select>
                            <p class="settings-help">Default priority level for new tasks</p>
                        </div>

                        <div class="settings-group">
                            <label class="settings-checkbox-label">
                                <input type="checkbox" id="settings-show-completed" class="settings-checkbox">
                                <span>Show completed tasks</span>
                            </label>
                            <p class="settings-help">Display completed tasks in task lists</p>
                        </div>

                        <div class="settings-divider"></div>

                        <h4 class="settings-section-title">Productivity</h4>

                        <div class="settings-group">
                            <label class="settings-checkbox-label">
                                <input type="checkbox" id="settings-auto-suggest-dates" class="settings-checkbox" checked>
                                <span>Auto-suggest due dates</span>
                            </label>
                            <p class="settings-help">Suggest "Today" for urgent tasks</p>
                        </div>

                        <div class="settings-group">
                            <label class="settings-label">Tasks per page</label>
                            <select id="settings-tasks-per-page" class="settings-select">
                                <option value="20">20 tasks</option>
                                <option value="50" selected>50 tasks</option>
                                <option value="100">100 tasks</option>
                                <option value="all">Show all</option>
                            </select>
                        </div>
                    </div>

                    <!-- Reminders Tab -->
                    <div class="settings-tab" id="settings-tab-reminders">
                        <h4 class="settings-section-title">Reminder Preferences</h4>

                        <div class="settings-group">
                            <label class="settings-label">Default Reminder Type</label>
                            <select id="settings-default-reminder-type" class="settings-select">
                                <option value="none">No reminder</option>
                                <option value="notification">Browser notification</option>
                                <option value="email">Email</option>
                            </select>
                            <p class="settings-help">Default reminder method for tasks with due dates</p>
                        </div>

                        <div class="settings-group">
                            <label class="settings-label">Default Reminder Timing</label>
                            <select id="settings-default-reminder-timing" class="settings-select">
                                <option value="10min">10 minutes before</option>
                                <option value="30min">30 minutes before</option>
                                <option value="1hour" selected>1 hour before</option>
                                <option value="2hours">2 hours before</option>
                                <option value="1day">1 day before</option>
                            </select>
                        </div>

                        <div class="settings-divider"></div>

                        <h4 class="settings-section-title">Email Notifications</h4>

                        <div class="settings-group">
                            <label class="settings-checkbox-label">
                                <input type="checkbox" id="settings-email-daily-summary" class="settings-checkbox">
                                <span>Daily summary email</span>
                            </label>
                            <p class="settings-help">Receive a daily email with your tasks due today</p>
                        </div>

                        <div class="settings-group">
                            <label class="settings-label">Daily summary time</label>
                            <input type="time" id="settings-daily-summary-time" class="settings-input" value="08:00">
                        </div>
                    </div>

                    <!-- Appearance Tab -->
                    <div class="settings-tab" id="settings-tab-appearance">
                        <h4 class="settings-section-title">Your Themes</h4>
                        <p class="settings-help" style="margin-bottom: 16px;">Choose a theme or create your own custom theme</p>

                        <div class="themes-gallery" id="themes-gallery">
                            <!-- Themes will be dynamically rendered here -->
                        </div>

                        <input type="file" id="theme-file-input" accept=".css" style="display: none;">

                        <div class="settings-divider"></div>

                        <h4 class="settings-section-title">Display</h4>

                        <div class="settings-group">
                            <label class="settings-label">Font Size</label>
                            <select id="settings-font-size" class="settings-select">
                                <option value="small">Small</option>
                                <option value="medium" selected>Medium</option>
                                <option value="large">Large</option>
                                <option value="xlarge">Extra Large</option>
                            </select>
                            <p class="settings-help">Adjust text size for better readability</p>
                        </div>

                        <div class="settings-group">
                            <label class="settings-checkbox-label">
                                <input type="checkbox" id="settings-compact-mode" class="settings-checkbox">
                                <span>Compact mode</span>
                            </label>
                            <p class="settings-help">Display more tasks on screen with reduced spacing</p>
                        </div>

                        <div class="settings-divider"></div>

                        <h4 class="settings-section-title">Task Display</h4>

                        <div class="settings-group">
                            <label class="settings-label">Default Task Sorting</label>
                            <select id="settings-task-sort" class="settings-select">
                                <option value="manual">Manual (drag and drop)</option>
                                <option value="dueDate">Due date</option>
                                <option value="priority">Priority</option>
                                <option value="name">Name (A-Z)</option>
                                <option value="created">Date created</option>
                            </select>
                            <p class="settings-help">How tasks should be ordered by default</p>
                        </div>

                        <div class="settings-group">
                            <label class="settings-checkbox-label">
                                <input type="checkbox" id="settings-show-priority-colors" class="settings-checkbox" checked>
                                <span>Show priority colors</span>
                            </label>
                            <p class="settings-help">Color-code tasks based on their priority level</p>
                        </div>

                        <div class="settings-group">
                            <label class="settings-checkbox-label">
                                <input type="checkbox" id="settings-show-subtask-count" class="settings-checkbox" checked>
                                <span>Show subtask count</span>
                            </label>
                            <p class="settings-help">Display subtask completion indicator (e.g., "3/5")</p>
                        </div>

                        <div class="settings-group">
                            <label class="settings-checkbox-label">
                                <input type="checkbox" id="settings-show-descriptions" class="settings-checkbox" checked>
                                <span>Show task descriptions</span>
                            </label>
                            <p class="settings-help">Display task descriptions in task list</p>
                        </div>

                        <div class="settings-divider"></div>

                        <h4 class="settings-section-title">Date & Time</h4>

                        <div class="settings-group">
                            <label class="settings-label">Date Format</label>
                            <select id="settings-date-format" class="settings-select">
                                <option value="mdy">MM/DD/YYYY (US)</option>
                                <option value="dmy">DD/MM/YYYY (UK)</option>
                                <option value="ymd">YYYY-MM-DD (ISO)</option>
                                <option value="relative">Relative (Today, Tomorrow)</option>
                            </select>
                            <p class="settings-help">How dates are displayed throughout the app</p>
                        </div>

                        <div class="settings-group">
                            <label class="settings-label">Time Format</label>
                            <select id="settings-time-format" class="settings-select">
                                <option value="12h">12-hour (AM/PM)</option>
                                <option value="24h">24-hour</option>
                            </select>
                            <p class="settings-help">Time display format</p>
                        </div>

                        <div class="settings-group">
                            <label class="settings-label">Week Starts On</label>
                            <select id="settings-week-start" class="settings-select">
                                <option value="0">Sunday</option>
                                <option value="1">Monday</option>
                                <option value="6">Saturday</option>
                            </select>
                            <p class="settings-help">First day of the week for calendar views</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="save-settings-btn">Save Changes</button>
                <button class="btn btn-secondary" id="cancel-settings-btn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Reset Password Modal -->
    <div class="modal" id="reset-password-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Reset Password</h3>
                <button class="modal-close" id="reset-password-modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 16px; color: var(--text-secondary); font-size: 13px;">
                    Enter your new password below. You'll receive a magic code via email to verify this change.
                </p>
                <div class="settings-group">
                    <label class="settings-label">New Password</label>
                    <input type="password" id="reset-new-password" class="settings-input" placeholder="Enter new password" minlength="6">
                </div>
                <div class="settings-group">
                    <label class="settings-label">Confirm New Password</label>
                    <input type="password" id="reset-confirm-password" class="settings-input" placeholder="Confirm new password">
                </div>
                <div id="reset-password-error" class="auth-error" style="display: none; margin-top: 12px;"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="reset-password-submit-btn">Send Verification Code</button>
                <button class="btn btn-secondary" id="reset-password-cancel-btn">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Verify Password Reset Modal -->
    <div class="modal" id="verify-password-reset-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Verify Password Reset</h3>
                <button class="modal-close" id="verify-password-reset-modal-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 16px; color: var(--text-secondary); font-size: 13px;">
                    We've sent a 6-digit verification code to your email. Please enter it below to complete the password reset.
                </p>
                <div class="settings-group">
                    <label class="settings-label">Verification Code</label>
                    <input type="text" id="verify-password-code" class="settings-input" placeholder="Enter 6-digit code" maxlength="6">
                </div>
                <div id="verify-password-error" class="auth-error" style="display: none; margin-top: 12px;"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" id="verify-password-submit-btn">Verify & Reset Password</button>
                <button class="btn btn-secondary" id="verify-password-cancel-btn">Cancel</button>
            </div>
        </div>
    </div>

    <script src="script-instantdb.js"></script>
</body>
</html>